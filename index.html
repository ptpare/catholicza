<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>catholicza</title>
  <!-- Move the meta tag with the CSP directive inside the head section -->
  <meta http-equiv="Content-Security-Policy" content="script-src 'unsafe-inline' 'unsafe-eval' 'self' *.bible.com *.youversion.com *.youversionapi.com *.youversionapistaging.com *.branch.io *.google.com *.google-analytics.com *.sharethis.com *.share-this.com *.typekit.net *.hotjar.com app.link.com *.googletagmanager.com *.polyfill.io cdn.ravenjs.com *.googleapis.com app.link https://js-agent.newrelic.com; img-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'self' https://www.bible.com;">
  <!-- Add the origin 'https://js-agent.newrelic.com' to the script-src directive -->
  <!-- Remove the hash value for the script 'https://js-agent.newrelic.com/nr-spa-1.250.0.min.js' -->
  <!-- Remove the nonce value for the script 'https://js-agent.newrelic.com/nr-spa-1.250.0.min.js' -->
  <!-- Remove the 'strict-dynamic' keyword from the script-src directive -->
  <!-- Remove the hash value for the image 'sha256-9xJL7qZ6jyJlMfD4yDcDvjZoQ6wJusCkDT2KsauF0kI=' -->
  <!-- Remove the script-src-elem directive and rely on the script-src directive only -->
  
  <!-- Load the New Relic JavaScript agent with the defer attribute -->
  <script src="https://js-agent.newrelic.com/nr-spa-1.250.0.min.js" defer></script>
   </head>

<body>
<!-- Add a label element for the language drop down menu -->
<label for="language-picker-select">Choose your language:</label>
<!-- Add a select element with the options for the languages -->
<select name="language-picker-select" id="language-picker-select" style="padding: 10px;" }>
  <option value="256">Sepedi</option>
  <option value="3499">Afrikaans</option>
  <option value="2645">Português</option>
  <option value="1204">English</option>
  <option value="13">Arabic</option>
  <option value="15">Čeština / Czech</option>
  <option value="32">chiShona</option>
  <option value="33">Sevenska / Swedish</option>
  <option value="73">Deutsch</option>
  <option value="149">Español</option>
  <option value="106">Français</option>
  <option value="274">Sesotho</option>
  <option value="278">Setswana</option>
  <option value="282">isiXhosa</option>
  <option value="286">isiZulu</option>
  <option value="280">Tshivenda</option>
  <option value="328">Nederlands</option>
  <option value="393">Kiswahili</option>
  <option value="399">Filipino</option>
  <option value="418">XiTsonga</option>
  <option value="461">Noni (Cameroon North West Province near Kumbo)</option>
  <option value="450">isiNdebele</option>
  <option value="472">Luvale</option>
  <option value="526">Magyar (Hungarian)</option>
  <option value="559">Acholi (Uganda)</option>
  <option value="604">Siswati</option>
  <option value="1068">Chichewa</option>
  <option value="1378">Chisena (Beira - Mozambique)</option>
  <option value="1444">Zimba</option>
  <option value="1810">Dholuo</option>
  <option value="3438">Myene</option>
  <option value="419">Bemba (Zambia)</option>
  <option value="7">Italiano</option>
   <option value="2259">Ewe</option>
   <option value="825"> Lozi</option>
   <option value="3090"> Lunda</option>
   <option value="825"> Lozi</option>
   <option value="948"> chiTonga</option>
   <option value="1961"> Tumbaka</option>
   <option value="3614"> Nsenga</option>
   
   
   
</select>
  
  </select>

<!-- HTML TABLE -->

<table id="bible-table">
  <tr>
    <td>Date / Day</td>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
  </tr>
  <tr>
    <td>Sunday, February 4</td>
    <td>JOB.7.1-4</td>
    <td>JOB.7.6-7</td>
    <td>PSA.147.1-2</td>
    <td>PSA.147.3-4</td>
    <td>PSA.147.5-6</td>
    <td>1CO.9.16-19</td>
    <td>1CO.9.22-23</td>
    <td>MRK.1.29-39</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Monday, February 5</td>
    <td>1KI.8.1-7</td>
    <td>1KI.8.9-13</td>
    <td>PSA.132.6-7</td>
    <td>PSA.132.8-10</td>
    <td>MRK.6.53-56</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Tuesday, February 6</td>
    <td>1KI.8.22-23</td>
    <td>1KI.8.27-30</td>
    <td>PSA.84.3</td>
    <td>PSA.84.4-5</td>
    <td>PSA.84.10-11</td>
    <td>MRK.7.1-13</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Wednesday, February 7</td>
    <td>1KI.10.1-10</td>
    <td>PSA.37.30-31</td>
    <td>PSA.37.39-40</td>
    <td>MRK.7.14-23</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Thursday, February 8</td>
    <td>1KI.11.4-13</td>
    <td>PSA.106.3-4</td>
    <td>PSA.106.35-36</td>
    <td>PSA.106.37</td>
    <td>PSA.106.40</td>
    <td>MRK.7.24-30</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Friday, February 9</td>
    <td>1KI.11.29-32</td>
    <td>1KI.12.19</td>
    <td>PSA.81.10-11</td>
    <td>PSA.81.12-13</td>
    <td>PSA.81.14-15</td>
    <td>MRK.7.31-37</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Saturday, February 10</td>
    <td>1KI.12.26-32</td>
    <td>1KI.13.33-34</td>
    <td>PSA.106.6-7</td>
    <td>PSA.106.19-20</td>
    <td>PSA.106.21-22</td>
    <td>MRK.8.1-10</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Sunday, February 11</td>
    <td>LEV.13.1-2</td>
    <td>LEV.13.44-46</td>
    <td>PSA.32.1-2</td>
    <td>PSA.32.5</td>
    <td>PSA.32.11(7)</td>
    <td>1CO.10.31</td>
    <td>1CO.11.1</td>
    <td>MRK.1.40-45</td>
    <td></td>
    <td></td>
  </tr>
</table>

  
<!-- IFRAME ELEMENT -->
<!-- Add a cookie attribute to the iframe element -->
<iframe id="iframe" name="my-iframe" width="400" height="300" allow-forms allow-scripts cookie="same-site=None; Secure"></iframe>

<!-- JAVASCRIPT CODE -->
<script>
// Declare global variables
let ref = "PSA.23.1-6";
// let lang_code = "1204";
const iframe = document.getElementById("iframe");

// Get the reference to the select element by its id
const select = document.getElementById("language-picker-select");
// Get the value of the selected option
let lang_code = select.value;

// Click event listener for table cells
document.querySelectorAll("#bible-table td").forEach(cell => {
  cell.addEventListener("click", function () {
    ref = cell.innerText;
    // Use the fetch API instead of setting the iframe src attribute
    // Pass the mode: "cors" option to the fetch function
    // Add the "Origin" header to the request
    lang_code = document.getElementById("language-picker-select").value;
	// Include CORS : `https://cors-anywhere.herokuapp.com/`
	const url = `https://cors-anywhere.herokuapp.com/`+`https://www.bible.com/bible/${lang_code}/${ref}`;
	console.log("Passage Selector")
    console.log("reference: " , ref);
    console.log("language code: " , lang_code);
    console.log(url);
    fetch(url, {
      mode: "cors",
      headers: {
        "Origin": "https://example.com"
      }
    })
    .then(response => response.text())
    .then(data => {
      // Set the iframe content to the data
      iframe.contentWindow.document.open();
      iframe.contentWindow.document.write(data);
      iframe.contentWindow.document.close();
    })
    // Handle the possible rejections of the fetch promise
    .catch(error => {
      // Handle the error
      console.error(error);
      // Display a message to the user
      alert("Sorry, something went wrong. Please try again later.");
    });
  });
});

// Event listener for language picker select
document.getElementById("language-picker-select").addEventListener("change", function() {
  lang_code = this.value;
  // Use the fetch API instead of setting the iframe src attribute
  // Pass the mode: "cors" option to the fetch function
  // Add the "Origin" header to the request
 // Include CORS : `https://cors-anywhere.herokuapp.com/`
  const url = `https://cors-anywhere.herokuapp.com/`+`https://www.bible.com/bible/${lang_code}/${ref}`;
  console.log("language picker")
  console.log("reference: " , ref);
  console.log("language code: " , lang_code);
  console.log(url);
  fetch(url, {
    mode: "cors",
    headers: {
      "Origin": "https://example.com"
    }
  })
  .then(response => response.text())
  .then(data => {
    // Set the iframe content to the data
    iframe.contentWindow.document.open();
    iframe.contentWindow.document.write(data);
    iframe.contentWindow.document.close();
  })
  // Handle the possible rejections of the fetch promise
  .catch(error => {
    // Handle the error
    console.error(error);
    // Display a message to the user
    alert("Sorry, something went wrong. Please try again later.");
  });
});
</script>

<!-- Move the comment to the end of the document or delete it -->
<!-- //cd /d P:\pare20241t\ServerVoogdy   python -m http.server -->
</body>
</html>
